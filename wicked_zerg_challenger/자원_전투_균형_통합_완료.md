# 자원 관리와 전투 균형 통합 완료

## 개요
자원 수집(드론 생산)과 전투 유닛 생산의 균형을 동적으로 조절하는 시스템을 구현하고 통합했습니다.

## 구현 내용

### 1. Economy-Combat Balancer (`economy_combat_balancer.py`)
- **위협 수준 계산**: 적 유닛 근접, 군대 크기 비교, 초반 러시 감지
- **경제 점수 계산**: 드론 수, 기지 수, 자원 수입률, 가스 추출기
- **균형 모드 결정**:
  - `FULL_ECONOMY`: 100% 경제 집중
  - `ECONOMY_FOCUS`: 70% 경제, 30% 전투
  - `BALANCED`: 50% 경제, 50% 전투
  - `COMBAT_FOCUS`: 30% 경제, 70% 전투
  - `FULL_COMBAT`: 100% 전투 집중

### 2. Production Resilience 통합
- **밸런서 초기화**: `__init__`에서 `EconomyCombatBalancer` 초기화
- **균형 생산 로직**: `_balanced_production()` 메서드로 드론/군대 유닛 결정
- **기존 로직 유지**: 밸런서가 없을 경우 기존 비상 생산 로직 사용

### 3. 주요 기능

#### 동적 비율 조절
- 게임 시간에 따른 자동 조절
- 위협 수준에 따른 즉각 반응
- 경제 상태에 따른 최적화

#### 생산 결정 로직
```python
# 밸런서가 드론 생산 권장 시
if should_make_drone and drone_count < target_drones:
    # 드론 생산
else:
    # 전투 유닛 생산 (저글링)
```

#### 로깅 및 모니터링
- 밸런스 모드, 드론/군대 비율, 위협 수준, 경제 점수 로깅
- 100 iteration마다 상태 출력

## 통합 위치

### `production_resilience.py`
- **Line 68-76**: 밸런서 초기화
- **Line 249-252**: Spawning Pool 준비 시 밸런서 사용
- **Line 342-403**: `_balanced_production()` 메서드
- **Line 405-427**: `_emergency_zergling_production()` 폴백 메서드

## 작동 방식

1. **초기화**: 게임 시작 시 `EconomyCombatBalancer` 인스턴스 생성
2. **상태 업데이트**: 5초마다 게임 상태 분석 및 밸런스 상태 계산
3. **생산 결정**: 각 라바에 대해 드론/전투 유닛 생산 결정
4. **동적 조절**: 위협 수준, 경제 상태, 게임 시간에 따라 비율 자동 조절

## 예상 효과

1. **초반 패배 감소**: 위협 감지 시 즉시 전투 유닛 생산
2. **경제 최적화**: 안전한 상황에서 드론 생산 우선
3. **균형 유지**: 게임 상황에 따라 자동으로 경제-전투 균형 조절
4. **승률 개선**: 적절한 타이밍에 적절한 유닛 생산

## 사용 방법

밸런서는 자동으로 작동합니다:
- `production_resilience.py`가 로드되면 자동 초기화
- Spawning Pool이 준비되면 자동으로 밸런서 사용
- 로그를 통해 현재 밸런스 상태 확인 가능

## 로그 예시

```
[BALANCE] Mode: balanced, Drone: 50.0%, Army: 50.0%, Threat: 30.0%, Economy: 70.0%, Current: 18, Target: 24
[BALANCE] Produced 1 drones, 2 army units (Total drones: 19, Target: 24)
```

## 다음 단계

1. 게임 훈련 실행하여 실제 효과 확인
2. 밸런스 파라미터 튜닝 (필요 시)
3. 승률 모니터링 및 개선
